<!--
  Creator: Wei Low

  Date Created: 28 Feb 2015
  Last Updated: 1 March 2015
  
  Description: Google Maps Javascript API Backend for PsetOrNot App
-->

<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Psetters In Your Area</title>

    <!-- Map Page Layout Style -->
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>

    <!-- Google Maps API Reference, including Wei Low's browser API Key -->
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDM8urGiP100_mibDOn1ZwVJid2oPzC1Mc">
    </script>

    <!-- Google Maps API Reference, including my browser API Key -->
    <script>
    //Below are temporary arrays that store basic data about the user and the other psetters.
    //Each array is currently filled with dummy data for the prototype stage of the application
    //Optimally the arrays would be filled with information obtained from the Fusion Table
    //Arrays store information in the format of ['Name', Lat, Long]

      var userloc = [['My Location', 42.361648260887, -71.0905194348]];
      var otherloc = [
          ['Person1', 42.361281194679,-71.090739104637],
          ['Person2', 42.361109910589,-71.091929775975],
          ['Person3', 42.359195019987, -71.088351164953],
          ['Person4', 42.358919686655, -71.094675498372],
          ['Person5', 42.362328, -71.091643]
        ];

    //The map will always be centered on the user's location
      var myCenter = new google.maps.LatLng(userloc[0][1], userloc[0][2])

    //This array contains the user and all relevant psetter's data
      var places = userloc.concat(otherloc);

    //The initialize function 
      function initialize() {
          var mapOptions = {
            zoom: 16,
            center: myCenter
            }
          var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
          setMarkers(map, places);
          map.fitBounds(bounds);
        }
      
      function setMarkers(map, locations){
          for (var i=0; i<locations.length; i++) {
            img = 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
            if (i==0) {
              img = 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png'
            }
            var mark = locations[i];
            var myLatLng = new google.maps.LatLng(mark[1], mark[2]);
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                size: new google.maps.Size(10,10),
                icon: img
              });

            }
        }
      
      google.maps.event.addDomListener(window, 'load', initialize);


/* FUSION TABLE EXAMPLE CODE FOR QUERIES
https://developers.google.com/maps/documentation/javascript/fusiontableslayer

var map;

function initialize() {
  var chicago = new google.maps.LatLng(41.948766, -87.691497);

  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: chicago,
    zoom: 12
  });

  var layer = new google.maps.FusionTablesLayer({
    query: {
      select: 'address',
      from: '1d7qpn60tAvG4LEg4jvClZbc1ggp8fIGGvpMGzA',
      where: 'ridership > 5000'
    }
  });
  layer.setMap(map);

}

google.maps.event.addDomListener(window, 'load', initialize);






*/

    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html>